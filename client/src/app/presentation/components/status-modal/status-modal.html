@if (isOpen) {
<div class="fixed inset-0 z-[100] flex items-center justify-center p-4">
    <div class="absolute inset-0 bg-slate-900/20 backdrop-blur-sm cursor-pointer transition-opacity"
        (click)="onCancel()">
    </div>

    <div (click)="$event.stopPropagation()"
        [class]="'relative w-full bg-white/95 backdrop-blur-xl rounded-[2.5rem] shadow-2xl p-8 text-center animate-in fade-in zoom-in-95 duration-200 border border-white/50 overflow-hidden ' + maxWidth">
        <div class="flex justify-center mb-6">
            @if (type === 'confirmation') {
            <div class="px-5 py-4 rounded-full animate-in zoom-in duration-300"
                [ngClass]="confirmColor === 'red' ? 'bg-red-100' : 'bg-orange-100'">
                @if (icon) {
                <ng-icon [name]="icon" class="text-5xl"
                    [ngClass]="confirmColor === 'red' ? 'text-red-600' : 'text-orange-500'">
                </ng-icon>
                } @else {
                <ng-icon name="heroExclamationTriangle" class="text-6xl"
                    [ngClass]="confirmColor === 'red' ? 'text-red-600' : 'text-orange-500'">
                </ng-icon>
                }
            </div>
            } @else {
            <div class="p-4 rounded-full animate-in zoom-in duration-300"
                [ngClass]="succeeded ? 'bg-green-100' : 'bg-red-100'">
                <ng-icon [name]="succeeded ? 'heroCheckCircle' : 'heroXCircle'" class="text-6xl"
                    [ngClass]="succeeded ? 'text-green-600' : 'text-red-600'">
                </ng-icon>
            </div>
            }
        </div>

        <div class="space-y-4 mb-8">
            @if (title) {
            <h2 class="text-xl font-black text-slate-800 uppercase tracking-tight">{{ title }}</h2>
            }
            
            @if (isJson) {
                <div class="text-left max-h-[350px] overflow-y-auto custom-scrollbar rounded-2xl border border-slate-100 shadow-inner">
                    <pre class="p-4 bg-[#020308] text-cyan-400 font-mono text-[14px] leading-snug whitespace-pre-wrap break-words border-l-4 border-orange-500 rounded-2xl shadow-2xl"><code class="block animate-in fade-in slide-in-from-left-2 duration-500">{{ message }}</code></pre>
                </div>
            } 
            @else {
                <p class="text-sm font-medium text-slate-500 leading-relaxed px-4 py-6">
                    {{ message }}
                </p>
            }
        </div>

        @if (type === 'confirmation') {
        <div class="flex gap-3 justify-center">

            @if (showCancelButton) {
            <button (click)="onCancel()"
                class="flex-1 py-3 px-4 rounded-xl font-bold text-sm bg-slate-100 text-slate-600 hover:bg-slate-200 transition-colors cursor-pointer">
                {{ cancelText }}
            </button>
            }

            <button (click)="onConfirmAction()"
                [class]="confirmColor === 'red' ? 'bg-red-600 hover:bg-red-700 shadow-red-200' : 'bg-blue-600 hover:bg-blue-700 shadow-blue-200'"
                class="flex-1 py-3 px-4 rounded-xl font-bold text-sm text-white shadow-lg transition-all active:scale-95 cursor-pointer">
                {{ confirmText }}
            </button>
        </div>
        } @else {
        <div class="absolute bottom-0 left-0 w-full bg-slate-100 h-1.5 overflow-hidden">
            <div class="h-full transition-all duration-30 ease-linear" [class.bg-green-500]="succeeded"
                [class.bg-red-500]="!succeeded" [style.width.%]="progressWidth">
            </div>
        </div>
        }
    </div>
</div>
}